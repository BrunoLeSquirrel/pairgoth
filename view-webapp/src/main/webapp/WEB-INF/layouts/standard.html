<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pairgoth</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Pairgoth Go Paring Engine">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="stylesheet" href="/lib/fork-awesome-1.2.0/fork-awesome.min.css">
  <link rel="stylesheet" href="/css/main.css">
  <script type="text/javascript" src="/js/domhelper.js"></script>
</head>
<body class="vert flex">
  <div id="header" class="horz flex">
    <div id="logo">
      <img src="/img/logo.svg"/>
    </div>
    <div id="title">
    </div>
    <div id="lang">
      <i class="$translate.flags[$request.lang] flag"></i>
      <div id="lang-list">
#foreach($lang in $translate.flags.entrySet())
  #if($lang != $request.lang)
        <a class="lang" data-lang="$lang.key" href="#"><i class="$lang.value flag"></i>&nbsp;$lang.key</a>
  #end
#end
      </div>
    </div>
  </div>
  <div id="center">
    <div id="inner">
#translate($page)
    </div>
  </div>
  <div id="footer" class="horz flex">
    <div id="version">pairgoth v0.1</div>
    <div id="contact"><a href="mailto:pairgoth@jeudego.org">contact</a></div>
  </div>
  <div id="dimmer"></div>
  <script type="text/javascript" src="/js/store2-2.14.2.min.js"></script>
  <script type="text/javascript" src="/js/tablesort-5.4.0.min.js"></script>
  <script type="text/javascript" src="/js/formproxy.js"></script>
  <script type="text/javascript" src="/js/api.js"></script>
  <script type="text/javascript" src="/js/main.js"></script>
  <script type="text/javascript">
    // #[[
    onLoad(() => {
      $('#lang').on('click', e => {
        $('#lang-list').toggleClass('shown');
      });
      $('.lang').on('click', e => {
        let lang = e.target.closest('.lang').data('lang');
        document.location.href = document.location.href.replace(/\/[a-z]{2}\//, `/${lang}/`);
        return false;
      });
      document.on('click', e => {
        if ($('#lang-list').hasClass('shown') && !e.target.closest('.lang,#lang')) {
          $('#lang-list').removeClass('shown');
        }
      });
    });
    // ]]#
  </script>
</body>
</html>
